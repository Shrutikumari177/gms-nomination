sap.ui.define(["sap/ui/core/Fragment","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/m/MessageBox"],function(e,t,n,r){"use strict";return{_openValueHelpDialog:function(t,n,r){let o=t.getView();if(!t[n]){return e.load({id:o.getId(),name:r,controller:t}).then(e=>{t[n]=e;o.addDependent(t[n]);t[n].open()}).catch(e=>{console.warn("Fragment not Loading",e)})}else{t[n].open()}},_valueHelpSelectedValue:function(e,t,n){let r=t.byId(n);let o=e.getParameter("selectedItem");let i=o.getTitle();if(i){r.setValue(i);e.getSource().getBinding("items").filter([]);return i}else{console.warn("Selected Value Not Found!!")}},_valueHelpLiveSearch:function(e,t,n,r){let o=e.getParameter("value")||e.getParameter("query")||e.getParameter("newValue");let i=e.getSource().getBinding("items");if(o){let e=[];if(Array.isArray(t)){t.forEach(function(t){e.push(new sap.ui.model.Filter(t,sap.ui.model.FilterOperator.Contains,o))})}else{e.push(new sap.ui.model.Filter(t,sap.ui.model.FilterOperator.Contains,o))}let n=new sap.ui.model.Filter({filters:e,and:false});i.filter([n])}else{i.filter([])}if(n&&r){let e=r.getView().byId(n);if(e){i.attachEventOnce("dataReceived",function(){let t=i.getCurrentContexts();e.setNoDataText(t&&t.length?"":"No Data")})}}},_getSingleEntityDataWithParam:async function(e,t,n,r){let o=e.getOwnerComponent().getModel();let i=o.bindList(`/${t}(${n}='${r}')`);try{let e=await i.requestContexts(0,Infinity);let t=e.map(e=>e.getObject());if(t.length===0){return sap.m.MessageToast.show("Data Not Found")}return t}catch(e){console.log(`Error occurred while reading data from the '${t}' entity : `,e)}},validateDNQ1:async function(e,t,n,o,i){try{const a=e.getModel();if(!a){throw new Error("OData model not found on the view.")}const l=new sap.ui.model.Filter({filters:[new sap.ui.model.Filter("CustomerNo",sap.ui.model.FilterOperator.EQ,n),new sap.ui.model.Filter("ServiceProfile",sap.ui.model.FilterOperator.EQ,o)],and:true});const s=a.bindList("/Nominationlogic",null,null,[l]);const u=await s.requestContexts(0,Infinity);const c=u.map(e=>e.getObject());if(!c.length){console.info("No rules found for customer.");return true}let d=false;c.forEach(e=>{const n=t[e.SP1];const o=t[e.SP2];if(n===undefined||o===undefined){console.warn(`Values missing for SP1: ${e.SP1} or SP2: ${e.SP2}`);return}console.log("rules ",e.SP2);if(i&&(e.SP2==="Min RDP DCQ"||e.SP2==="Min DP DCQ")){return}const a={"<=":n<=o,">=":n>=o,"=":n===o,"!=":n!==o};if(!a[e.logicaloperator]){r.error(e.message||`${e.SP1} validation failed`);d=true}});return!d}catch(e){console.error("Validation error:",e);r.error("An error occurred during validation.");return false}},validateDNQ:async function(e,t,n,r,o){try{const i=e.getModel();if(!i){throw new Error("OData model not found on the view.")}const a=new sap.ui.model.Filter({filters:[new sap.ui.model.Filter("CustomerNo",sap.ui.model.FilterOperator.EQ,n),new sap.ui.model.Filter("ServiceProfile",sap.ui.model.FilterOperator.EQ,r)],and:true});const l=i.bindList("/Nominationlogic",null,null,[a]);const s=await l.requestContexts(0,Infinity);const u=s.map(e=>e.getObject());if(!u.length){console.info("No rules found for customer.");return{isValid:true}}for(let e of u){const n=t[e.SP1];const r=t[e.SP2];if(n===undefined||r===undefined){console.warn(`Values missing for SP1: ${e.SP1} or SP2: ${e.SP2}`);continue}if(o&&(e.SP2==="Min RDP DCQ"||e.SP2==="Min DP DCQ")){continue}const i={"<=":n<=r,">=":n>=r,"=":n===r,"!=":n!==r};if(!i[e.logicaloperator]){return{isValid:false,message:e.message||`${e.SP1} validation failed`}}}return{isValid:true}}catch(e){console.error("Validation error:",e);return{isValid:false,message:"An error occurred during validation."}}},_getSingleEntityData:async function(e,t){let n=e.getOwnerComponent().getModel();let r=n.bindList(`/${t}`);try{let e=await r.requestContexts(0,Infinity);let n=e.map(e=>e.getObject());if(n.length===0){console.log(`No data found for '${t}'.`)}return n}catch(e){console.error(`Error occurred while reading data from the '${t}' entity:`,e);return[]}}}});
//# sourceMappingURL=HelperFunction.js.map