sap.ui.define(["sap/ui/core/Fragment","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/m/MessageBox"],function(e,t,n,o){"use strict";return{_openValueHelpDialog:function(t,n,o){let r=t.getView();if(!t[n]){return e.load({id:r.getId(),name:o,controller:t}).then(e=>{t[n]=e;r.addDependent(t[n]);t[n].open()}).catch(e=>{console.warn("Fragment not Loading",e)})}else{t[n].open()}},_valueHelpSelectedValue:function(e,t,n){let o=t.byId(n);let r=e.getParameter("selectedItem");let a=r.getTitle();if(a){o.setValue(a);e.getSource().getBinding("items").filter([]);return a}else{console.warn("Selected Value Not Found!!")}},_valueHelpLiveSearch:function(e,t,o,r){let a=e.getParameter("value")||e.getParameter("query")||e.getParameter("newValue");let i=e.getSource().getBinding("items");if(a){let e=new sap.ui.model.Filter(t,n.Contains,a);i.filter([e])}else{i.filter([])}if(o&&r){let e=r.getView().byId(o);if(e){i.attachEventOnce("dataReceived",function(t){let n=i.getCurrentContexts();if(!n||n.length===0){e.setNoDataText("No Data")}else{e.setNoDataText("")}})}}},_getSingleEntityDataWithParam:async function(e,t,n,o){let r=e.getOwnerComponent().getModel();let a=r.bindList(`/${t}(${n}='${o}')`);try{let e=await a.requestContexts(0,Infinity);let t=e.map(e=>e.getObject());if(t.length===0){return sap.m.MessageToast.show("Data Not Found")}return t}catch(e){console.log(`Error occurred while reading data from the '${t}' entity : `,e)}},validateDNQ:async function(e,t,n){try{const r=e.getModel();if(!r){throw new Error("OData model not found on the view.")}const a=new sap.ui.model.Filter("CustomerNo",sap.ui.model.FilterOperator.EQ,n);const i=r.bindList("/Nominationlogic",null,null,[a]);const l=await i.requestContexts(0,Infinity);const s=l.map(e=>e.getObject());if(!s.length){console.info(`No rules found for CustomerNo: ${n}`);return true}const c=s.reduce((e,t)=>{const n=t.logic||"NONE";(e[n]||=[]).push(t);return e},{});let u=false;Object.entries(c).forEach(([e,n])=>{let r=e==="AND";n.forEach(n=>{const a=t[n.SP1];const i=t[n.SP2];if(a===undefined||i===undefined){console.warn(`Values missing for SP1: ${n.SP1} or SP2: ${n.SP2}`);return}const l={"<=":a<=i,">=":a>=i,"=":a===i,"!=":a!==i};const s=l[n.logicaloperator];if(e==="AND"){r=r&&s}else if(e==="OR"){r=r||s}else if(!s){o.error(n.message||`${n.SP1} validation failed against ${n.SP2}`);u=true}});if(e==="AND"&&!r||e==="OR"&&!r){const e=n.map(e=>e.message||`${e.SP1} validation failed`).join("\n");o.error(e);u=true}});return!u}catch(e){console.error("Validation error:",e);o.error("An error occurred during validation.");return false}},_getSingleEntityData:async function(e,t){let n=e.getOwnerComponent().getModel();let o=n.bindList(`/${t}`);try{let e=await o.requestContexts(0,Infinity);let n=e.map(e=>e.getObject());if(n.length===0){console.log(`No data found for '${t}'.`)}return n}catch(e){console.error(`Error occurred while reading data from the '${t}' entity:`,e);return[]}}}});
//# sourceMappingURL=HelperFunction.js.map