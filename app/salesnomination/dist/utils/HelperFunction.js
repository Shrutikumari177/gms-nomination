sap.ui.define(["sap/ui/core/Fragment","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/m/MessageBox"],function(e,t,o,n){"use strict";return{_openValueHelpDialog:function(t,o,n){let r=t.getView();if(!t[o]){return e.load({id:r.getId(),name:n,controller:t}).then(e=>{t[o]=e;r.addDependent(t[o]);t[o].open()}).catch(e=>{console.warn("Fragment not Loading",e)})}else{t[o].open()}},_valueHelpSelectedValue:function(e,t,o){let n=t.byId(o);let r=e.getParameter("selectedItem");let i=r.getTitle();if(i){n.setValue(i);e.getSource().getBinding("items").filter([]);return i}else{console.warn("Selected Value Not Found!!")}},_valueHelpLiveSearch:function(e,t,n,r){let i=e.getParameter("value")||e.getParameter("query")||e.getParameter("newValue");let a=e.getSource().getBinding("items");if(i){let e=new sap.ui.model.Filter(t,o.Contains,i);a.filter([e])}else{a.filter([])}if(n&&r){let e=r.getView().byId(n);if(e){a.attachEventOnce("dataReceived",function(t){let o=a.getCurrentContexts();if(!o||o.length===0){e.setNoDataText("No Data")}else{e.setNoDataText("")}})}}},_getSingleEntityDataWithParam:async function(e,t,o,n){let r=e.getOwnerComponent().getModel();let i=r.bindList(`/${t}(${o}='${n}')`);try{let e=await i.requestContexts(0,Infinity);let t=e.map(e=>e.getObject());if(t.length===0){return sap.m.MessageToast.show("Data Not Found")}return t}catch(e){console.log(`Error occurred while reading data from the '${t}' entity : `,e)}},validateDNQ1:async function(e,t,o){try{const r=e.getModel();if(!r){throw new Error("OData model not found on the view.")}const i=new sap.ui.model.Filter("CustomerNo",sap.ui.model.FilterOperator.EQ,o);const a=r.bindList("/Nominationlogic",null,null,[i]);const l=await a.requestContexts(0,Infinity);const s=l.map(e=>e.getObject());if(!s.length){console.info(`No rules found for CustomerNo: ${o}`);return}const c=s.reduce((e,t)=>{const o=t.logic||"NONE";(e[o]||=[]).push(t);return e},{});Object.entries(c).forEach(([e,o])=>{let r=e==="AND";o.forEach(o=>{const i=t[o.SP1];const a=t[o.SP2];if(i===undefined||a===undefined){console.warn(`Values missing for SP1: ${o.SP1} or SP2: ${o.SP2}`);return}const l={"<=":i<=a,">=":i>=a,"=":i===a,"!=":i!==a};const s=l[o.logicaloperator];if(e==="AND"){r=r&&s}else if(e==="OR"){r=r||s}else if(!s){n.error(o.message||`${o.SP1} validation failed against ${o.SP2}`)}});if(e==="AND"&&!r||e==="OR"&&!r){n.error(`Validation failed for rules group with logic: ${e}`)}})}catch(e){console.error("Validation error:",e);n.error("An error occurred during validation.")}},validateDNQ:async function(e,t,o){try{const r=e.getModel();if(!r){throw new Error("OData model not found on the view.")}const i=new sap.ui.model.Filter("CustomerNo",sap.ui.model.FilterOperator.EQ,o);const a=r.bindList("/Nominationlogic",null,null,[i]);const l=await a.requestContexts(0,Infinity);const s=l.map(e=>e.getObject());if(!s.length){console.info(`No rules found for CustomerNo: ${o}`);return}const c=s.reduce((e,t)=>{const o=t.logic||"NONE";(e[o]||=[]).push(t);return e},{});Object.entries(c).forEach(([e,o])=>{let r=e==="AND";o.forEach(o=>{const i=t[o.SP1];const a=t[o.SP2];if(i===undefined||a===undefined){console.warn(`Values missing for SP1: ${o.SP1} or SP2: ${o.SP2}`);return}const l={"<=":i<=a,">=":i>=a,"=":i===a,"!=":i!==a};const s=l[o.logicaloperator];if(e==="AND"){r=r&&s}else if(e==="OR"){r=r||s}else if(!s){n.error(o.message||`${o.SP1} validation failed against ${o.SP2}`)}});if(e==="AND"&&!r||e==="OR"&&!r){const e=o.map(e=>e.message||`${e.SP1} validation failed`).join("\n");n.error(e)}})}catch(e){console.error("Validation error:",e);n.error("An error occurred during validation.")}},_getSingleEntityData:async function(e,t){let o=e.getOwnerComponent().getModel();let n=o.bindList(`/${t}`);try{let e=await n.requestContexts(0,Infinity);let o=e.map(e=>e.getObject());if(o.length===0){console.log(`No data found for '${t}'.`)}return o}catch(e){console.error(`Error occurred while reading data from the '${t}' entity:`,e);return[]}}}});
//# sourceMappingURL=HelperFunction.js.map